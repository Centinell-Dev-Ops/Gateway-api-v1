

<!-- Pantallas de la aplicaci√≥n -->
<div class="container" id="appContainer">
    <!-- PANTALLA 1 - Inicial (se muestra primero) -->
    <div id="screen1">
        <h2 style="color: white; text-align: center;">Bienvenido</h2>
        <button class="telegram-btn" id="mainButton">
            üöÄ Clic aqu√≠ para continuar
        </button>
    </div>

    <!-- PANTALLA 3 - Final (oculta inicialmente, se muestra al regresar) -->
    <div id="screen3" style="display: none;">
        <h2 style="color: white; text-align: center;">‚úÖ Solicitud enviada</h2>
        <p style="color: #ccc; text-align: center;">Gracias. El administrador revisar√° tu solicitud pronto.</p>
        <button class="exit-button" id="exitButton">Salir de la aplicaci√≥n</button>
    </div>
</div>

<script>
    // Elementos del DOM
    const screen1 = document.getElementById('screen1');
    const screen3 = document.getElementById('screen3');
    const mainButton = document.getElementById('mainButton');
    const exitButton = document.getElementById('exitButton');
    const telegramLink = 'https://t.me/+hUWgO1P26_M0MGI5';

    // 1. Comportamiento del bot√≥n principal (Abrir Telegram)
    mainButton.addEventListener('click', function() {
        console.log('Redirigiendo a la pantalla de Telegram...');
        window.location.href = telegramLink;
    });

    // 2. Detectar si el usuario REGRESA de la pantalla de Telegram
    function checkIfReturnedFromTelegram() {
        // Esta l√≥gica detecta patrones comunes al volver de un enlace en la misma pesta√±a
        const referrer = document.referrer;
        const cameFromSameOrigin = referrer === '' || referrer.includes(window.location.origin);

        if (cameFromSameOrigin && document.visibilityState === 'visible') {
            console.log('Regreso detectado. Mostrando pantalla final...');
            // Cambiar a la PANTALLA 3
            screen1.style.display = 'none';
            screen3.style.display = 'block';
        }
    }

    // 3. Configurar el bot√≥n de Salir (CON confirmaci√≥n)
    exitButton.addEventListener('click', function() {
        if (confirm('¬øSeguro que quieres salir de la aplicaci√≥n?')) {
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.close(); // Cierre nativo en Telegram
            } else {
                alert('Listo. Puedes cerrar esta pesta√±a.'); // Fallback para navegadores
            }
        }
    });

    // 4. Inicializar: Verificar al cargar y al cambiar visibilidad
    window.addEventListener('load', checkIfReturnedFromTelegram);
    document.addEventListener('visibilitychange', checkIfReturnedFromTelegram);
</script>


